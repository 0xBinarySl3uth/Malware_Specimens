#include <Windows.h>
#include <tlhelp32.h>
#include <stdio.h>

void ListProcess() {
    // Forward Declarations
    HANDLE hSnapShotProcesses = NULL;
    PROCESSENTRY32 Proc = { sizeof(PROCESSENTRY32) }; // Initialize the structure

    // Create a snapshot of the current system processes
    hSnapShotProcesses = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0);

    // Check if the snapshot creation was successful
    if (hSnapShotProcesses == INVALID_HANDLE_VALUE) {
        printf("[+] Failed to Create Snapshot. Error code: %d\n", GetLastError());
        return; 
    }

    // If the snapshot was created successfully, notify the user
    printf("[+] Snapshot of Running Processes Has Been Made!\n");

    // Close the handle to the process snapshot
    CloseHandle(hSnapShotProcesses);
}

int main() {
    ListProcess();
    return 0;
}
